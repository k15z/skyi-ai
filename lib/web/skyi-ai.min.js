!function t(r,e,n){function i(s,u){if(!e[s]){if(!r[s]){var _="function"==typeof require&&require;if(!u&&_)return _(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var p=e[s]={exports:{}};r[s][0].call(p.exports,function(t){var e=r[s][1][t];return i(e?e:t)},p,p.exports,t,r,e,n)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,r,e){var n;n=function(){function t(t){null==t&&(t={}),this._tree={},this._score=!1,this._max_depth=t.max_depth?t.max_depth:32,this._num_tries=t.num_tries?t.num_tries:16}return t.prototype.save=function(){return this._tree},t.prototype.load=function(t){return this._tree=t},t.prototype.fit=function(t,r){return this._build_node(t,r,this._tree,this._max_depth),this._score=this.score(t,r)},t.prototype.score=function(t,r){var e,n,i,o,s,u,_,h,p,f,l;for(f=0,l=0,_=this.predict(t),o=s=0,h=_.length;0<=h?s<h:s>h;o=0<=h?++s:--s){e=0,n=!1,p=_[o];for(u in p)i=p[u],i>e&&(e=i,n=u);n+""==r[o]+""&&f++,l++}return f/l},t.prototype.predict=function(t){var r,e,n,i;for(i=[],r=0,e=t.length;r<e;r++)n=t[r],i.push(this.predict_one(n));return i},t.prototype.predict_one=function(t){var r;for(r=this._tree;r&&!r.leaf;)r=t[r.index]<r.split?r.left:r.right;return r?r.distribution:{}},t.prototype._build_node=function(t,r,e,n){var i,o,s,u;return s=this._count(r),o=s[0],u=s[1],0===n||Object.keys(o).length<=1?(e.leaf=!0,e.total=u,e.distribution=o):(i=this._select_split(t,r),e.index=i.index,e.split=i.split,e.left={},this._build_node(i.left_x,i.left_y,e.left,n-1),e.right={},this._build_node(i.right_x,i.right_y,e.right,n-1))},t.prototype._select_split=function(t,r){var e,n,i,o,s,u,_,h,p,f;for(_=t.length,u=t[0].length,e={impurity:Number.MAX_SAFE_INTEGER,index:-1,split:-1,left_x:[],left_y:[],right_x:[],right_y:[]},f=o=0,h=this._num_tries;0<=h?o<h:o>h;f=0<=h?++o:--o){for(n={},n.impurity=0,n.index=this._rand_int(u),n.split=this._rand_float(t[this._rand_int(_)][n.index],t[this._rand_int(_)][n.index]),n.left_x=[],n.left_y=[],n.right_x=[],n.right_y=[],i=s=0,p=_;0<=p?s<p:s>p;i=0<=p?++s:--s)t[i][n.index]<n.split?(n.left_x.push(t[i]),n.left_y.push(r[i])):(n.right_x.push(t[i]),n.right_y.push(r[i]));n.impurity=this._impurity(n.left_y)+this._impurity(n.right_y),n.impurity<e.impurity&&(e=n)}return e},t.prototype._rand_int=function(t){var r;return r=Math.random()*t,Math.floor(r)},t.prototype._rand_float=function(t,r){var e;return e=Math.random(),t*e+r*(1-e)},t.prototype._count=function(t){var r,e,n,i,o;for(i={},o=0,r=0,n=t.length;r<n;r++)e=t[r],i[e]||(i[e]=0),i[e]+=1,o+=1;return[i,o]},t.prototype._impurity=function(t){var r,e,n,i,o,s;r=1,i=this._count(t),n=i[0],o=i[1];for(e in n)s=n[e],r-=s/o*(s/o);return r},t}(),r.exports=n},{}],2:[function(t,r,e){var n,i;n=t("./DecisionTree"),i=function(){function t(t){null==t&&(t={}),this._trees=[],this._opts=t,this._verbose=!!t.verbose&&t.verbose,this._num_trees=t.num_trees?t.num_trees:8,this._num_folds=t.num_folds?t.num_folds:1,this._redundancy=t.redundancy?t.redundancy:1}return t.prototype.save=function(){var t,r,e,n,i;for(i=[],e=this._trees,t=0,r=e.length;t<r;t++)n=e[t],i.push(n.save());return i},t.prototype.load=function(t){var r,e,i,o,s;for(e=[],i=0,o=t.length;i<o;i++)s=t[i],r=new n,r.load(s),e.push(r);return this._trees=e},t.prototype.fit=function(t,r){var e,i,o,s,u,_,h,p,f,l;for(e=o=0,_=this._num_trees*this._redundancy;0<=_?o<_:o>_;e=0<=_?++o:--o){for(this._verbose&&console.log("building tree "+e+"..."),p=[],f=[],l=new n(this._opts),u=Math.floor(t.length/this._num_folds),e=s=0,h=u;0<=h?s<h:s>h;e=0<=h?++s:--s)i=parseInt(Math.random()*t.length),p.push(t[i]),f.push(r[i]);l.fit(p,f),this._trees.push(l)}return this._trees.sort(function(t,r){return r._score-t._score}),this._trees.splice(this._num_trees)},t.prototype.score=function(t,r){var e,n,i,o,s,u,_,h,p,f,l;for(p=0,l=0,u=this.predict(t),i=o=0,_=u.length;0<=_?o<_:o>_;i=0<=_?++o:--o){n=0,e=!1,h=u[i];for(s in h)f=h[s],f>n&&(n=f,e=s);e===r[i]&&p++,l++}return p/l},t.prototype.predict=function(t){var r,e,n,i;for(i=[],r=0,e=t.length;r<e;r++)n=t[r],i.push(this.predict_one(n));return i},t.prototype.predict_one=function(t){var r,e,n,i,o;for(o=[],n=this._trees,r=0,e=n.length;r<e;r++)i=n[r],o.push(i.predict_one(t));return this._collate(o)},t.prototype._collate=function(t){var r,e,n,i,o,s,u;for(r={},e=n=0,o=t.length;0<=o?n<o:n>o;e=0<=o?++n:--n){s=t[e];for(i in s)u=s[i],r[i]||(r[i]=0),r[i]+=u}return r},t}(),r.exports=i},{"./DecisionTree":1}]},{},[2]);